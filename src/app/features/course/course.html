<div class="course-container container-fluid min-vh-100 py-4">
  <div class="content-wrapper">
    <div *ngIf="loading" class="text-center py-5">
      <div class="spinner-border text-rose" role="status">
        <span class="visually-hidden">Cargando...</span>
      </div>
    </div>

    <div *ngIf="!loading && course" class="course-detail">
      <!-- Course Header -->
      <div class="course-header mb-5">
        <button class="btn btn-outline-light mb-3" routerLink="/">
          <i class="bi bi-arrow-left me-2"></i>Volver a Inicio
        </button>
        
        <div class="row align-items-center">
          <div class="col-lg-5">
            <img 
              [src]="course.imageUrl" 
              [alt]="course.title"
              class="img-fluid rounded-4 shadow-lg course-banner"
            >
          </div>
          <div class="col-lg-7 mt-4 mt-lg-0">
            <h1 class="display-4 fw-bold text-white mb-3">{{ course.title }}</h1>
            <p class="lead text-light">{{ course.description }}</p>
          </div>
        </div>
      </div>

      <!-- Lessons Section -->
      <div class="lessons-section">
        <h2 class="h3 text-rose mb-4">
          <i class="bi bi-collection-play me-2"></i>Clases del Curso
        </h2>

        <div *ngIf="course.lessons.length === 0" class="text-center text-white py-5">
          <p class="lead">Este curso a√∫n no tiene clases disponibles.</p>
        </div>

        <div class="row g-4">
          <div 
            *ngFor="let lesson of course.lessons; let i = index" 
            class="col-12 col-md-6 col-lg-4"
          >
            <div class="lesson-card">
              <div class="lesson-number">Clase {{ i + 1 }}</div>
              <div class="card-body">
                <h5 class="lesson-title">{{ lesson.title }}</h5>
                <p class="lesson-content">{{ lesson.content }}</p>
                <button 
                  (click)="openVideoModal(lesson.videoUrl)" 
                  class="btn btn-navy w-100 mt-3"
                >
                  <i class="bi bi-play-circle-fill me-2"></i>Ver Clase
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Video Modal -->
  <div 
    class="modal fade show" 
    [class.d-block]="isModalOpen" 
    tabindex="-1" 
    *ngIf="isModalOpen"
    style="background: rgba(0,0,0,0.85);"
  >
    <div class="modal-dialog modal-dialog-centered modal-xl">
      <div class="modal-content bg-transparent border-0">
        <div class="modal-header border-0 p-0 mb-2">
          <button 
            type="button" 
            class="btn-close btn-close-white ms-auto" 
            (click)="closeVideoModal()"
          ></button>
        </div>
        <div class="modal-body p-0">
          <div class="ratio ratio-16x9 shadow-lg rounded-4 overflow-hidden">
            <iframe 
              [src]="selectedVideoUrl" 
              title="YouTube video player" 
              frameborder="0" 
              allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
              allowfullscreen
            ></iframe>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
